# 📊 DataConta - Sistema de Gestión Financiera con Arquitectura Hexagonal# DataConta FREE - Sistema de Gestión Financiera Gratuito# DataConta - Sistema Avanzado de Gestión con Interfaz Gráfica



[![Python Version](https://img.shields.io/badge/python-3.7+-blue.svg)](https://www.python.org/downloads/)

[![PySide6](https://img.shields.io/badge/GUI-PySide6-green.svg)](https://doc.qt.io/qtforpython/)

[![Architecture](https://img.shields.io/badge/architecture-hexagonal-orange.svg)](#arquitectura)**DataConta FREE** es una aplicación gratuita de gestión financiera con interfaz gráfica moderna, desarrollada en Python para integración con la API de Siigo. Incluye análisis de KPIs, exportación de datos y funcionalidades básicas para pequeñas empresas.**DataConta** es un sistema profesional de gestión financiera desarrollado en Pyt### **🖥️ Interfaz Gráfica (GUI) - PROFESSIONAL+** 💼

[![License](https://img.shields.io/badge/license-MIT-purple.svg)](LICENSE)

```bash

**DataConta** es un sistema profesional de gestión financiera desarrollado en Python que implementa **Arquitectura Hexagonal** completa. Ofrece integración directa con la **API de Siigo** para obtener datos reales de facturación, con capacidades avanzadas de análisis, exportación y generación de reportes financieros automatizados.

## 🎁 DataConta FREE - Versión Gratuitapython main_gui.py

## 🎯 Características Principales

```

### ✨ **Funcionalidades Core**

- 🌐 **Integración API Siigo**: Conexión directa para datos reales de facturación### ✨ **Características Principales**- **Interfaz moderna** con PySide6 (solo PROFESSIONAL y ENTERPRISE)

- 📊 **Dashboard KPIs**: Métricas empresariales en tiempo real 

- 🏆 **Análisis Top Clientes**: Consolidación automática por NIT- 🖥️ **Interfaz Gráfica Moderna**: GUI completa con PySide6- **Menús dinámicos** configurables según licencia

- 📤 **Exportación CSV/Excel**: Datos estructurados para análisis

- 🔍 **Consulta de Facturas**: Filtros avanzados y búsqueda personalizada- 📊 **Dashboard con KPIs**: Visualización de métricas básicas en tiempo real- **Informes integrados** con validación automática de permisos

- 📁 **Gestión de Archivos**: Administración automática de reportes generados

- 👑 **Top de Clientes**: Análisis detallado de mejores clientes con consolidación por NIT- **Navegación intuitiva** con restricciones por tipo de licencia

### 🖥️ **Interfaz Dual**

- **GUI Moderna (PySide6)**: Interfaz gráfica profesional con Qt6- 📋 **Consulta de Facturas**: Hasta 100 facturas por consulta- **Indicador visual** de licencia activa y límites disponibles

- **CLI Completa**: Línea de comandos para automatización y scripts

- 📤 **Exportación CSV**: Datos reales exportados desde Siigo API

### 🏗️ **Arquitectura Técnica**

- **Hexagonal Clean Architecture**: Separación completa de responsabilidades- 🌐 **Integración Siigo**: Conexión directa con API de Siigo#### **⌨️ Interfaz de Línea de Comandos (CLI) - Todas las Licencias** 🆓

- **Principios SOLID**: Código mantenible y extensible

- **Patrones de Diseño**: Factory, Adapter, Strategy implementados- 🔍 **Filtros Avanzados**: Por fechas, clientes, estados```bash

- **Inyección de Dependencias**: Acoplamiento mínimo entre capas

- **Type Hints Completos**: Tipado estático para mayor robustez- 📱 **Ventana Maximizada**: Interfaz optimizada para máximo aprovechamiento de pantallapython main_hexagonal.py          # CLI completa con validación de licencia



## 📋 Tabla de Contenidospython dataconta_advanced.py      # CLI avanzada (funciones según licencia)



- [🚀 Instalación Rápida](#-instalación-rápida)### 📊 **KPIs Disponibles**```

- [💻 Uso de la Aplicación](#-uso-de-la-aplicación)

- [🏗️ Arquitectura](#️-arquitectura)- 💰 **Ventas Totales**: Suma total de facturación- **Disponible en todas las licencias** (FREE, PROFESSIONAL, ENTERPRISE)

- [📊 Funcionalidades Detalladas](#-funcionalidades-detalladas)

- [⚙️ Configuración](#️-configuración)- 📄 **Número de Facturas**: Cantidad de facturas emitidas- **Funciones adaptadas** según tipo de licencia activa

- [🔧 Desarrollo](#-desarrollo)

- [📈 Casos de Uso](#-casos-de-uso)- 🎯 **Ticket Promedio**: Valor promedio por factura- **Límites automáticos** aplicados transparentemente

- [🚨 Solución de Problemas](#-solución-de-problemas)

- [📄 Documentación Técnica](#-documentación-técnica)- 👑 **Top Cliente**: Cliente con mayor facturación (consolidado por NIT)- **Mensajes informativos** sobre restricciones activase interfaz: CLI y GUI**, implementando **Arquitectura Hexagonal** completa con capacidades avanzadas de exportación, Business Intelligence e **Informes Financieros Automatizados**.



## 🚀 Instalación Rápida- 🔄 **Última Actualización**: Timestamp de última sincronización



### **Prerrequisitos**## 🎫 Sistema de Licencias - NUEVO (v3.0.0)

- Python 3.7+ (Recomendado: 3.11+)

- pip (gestor de paquetes Python)### 🏆 **Top de Clientes Mejorado**

- Acceso a API de Siigo (credenciales válidas)

- **Consolidación por NIT**: Elimina duplicados agregando montos por NIT únicoDataConta ahora incluye un **sistema completo de licencias de 3 niveles** adaptado a diferentes necesidades empresariales:

### **Instalación en 3 Pasos**

- **Nombres Inteligentes**: Muestra nombre real o "Cliente NIT: XXXX" si no está disponible

```bash

# 1. Clonar el repositorio- **Ventana Detallada**: TOP 10 con medallitas 🥇🥈🥉, porcentajes y estadísticas### 💰 **FREE (Gratuita)**

git clone <url-repositorio>

cd dataconta- **Análisis Visual**: Tabla con posiciones, montos y participación en ventas totales- ✅ **Interfaz CLI completa**



# 2. Instalar dependencias- ✅ **Hasta 500 facturas** por consulta

pip install -r requirements.txt

## 🚀 Funcionalidades Disponibles- ✅ **Exportación básica CSV**

# 3. Configurar variables de entorno

cp .env.template .env- ✅ **Validación de API**

# Editar .env con sus credenciales de Siigo

```### 🖥️ **Interfaz Gráfica (GUI)**- ❌ No incluye GUI



### **Dependencias Principales**```bash- ❌ No incluye BI Export

```ini

# Corepython dataconta_free_gui.py- ❌ No incluye informes financieros

requests>=2.31.0          # Comunicación HTTP con API

python-dotenv>=1.0.0      # Variables de entorno```

pandas>=2.0.0             # Procesamiento de datos

### 💼 **PROFESSIONAL (Profesional)**

# Interfaz Gráfica

PySide6>=6.7.0           # GUI moderna con Qt6#### **Dashboard Principal**- ✅ **Todo lo de FREE +**

qt-material>=2.14.0      # Temas Material Design

- 📊 **5 KPIs básicos** con colores distintivos- ✅ **Interfaz GUI completa con PySide6**

# Utilidades

openpyxl>=3.1.0          # Exportación Excel- 🔄 **Actualización en tiempo real** desde API Siigo- ✅ **Hasta 2,000 facturas** por consulta

```

- 👑 **Botón "Ver TOP 10 Clientes Detallado"** para análisis completo- ✅ **Business Intelligence Export** (limitado)

## 💻 Uso de la Aplicación

- ✅ **Carga automática** de KPIs guardados al iniciar- ✅ **Informes financieros básicos**

### **🖥️ Interfaz Gráfica (Recomendada)**

- ✅ **Menús dinámicos configurables**

```bash

# Ejecutar GUI principal#### **Pestañas Disponibles**- ✅ **Dashboard integrado**

python dataconta.py

```1. **📊 Dashboard FREE**: KPIs básicos y actualización de datos



**Características de la GUI:**2. **🔍 Consultar Facturas**: Búsqueda básica con filtros### 🏢 **ENTERPRISE (Empresarial)**

- ✅ **Dashboard Visual**: KPIs actualizables en tiempo real

- ✅ **Navegación por Pestañas**: Organización intuitiva de funciones3. **📤 Exportar CSV**: Exportación de hasta 100 facturas reales- ✅ **Todo lo de PROFESSIONAL +**

- ✅ **Top Clientes Detallado**: Ventana dedicada con análisis completo

- ✅ **Exportación Integrada**: Múltiples formatos desde la interfaz4. **🌐 API Siigo**: Descarga directa con filtros personalizados- ✅ **Facturas ilimitadas**

- ✅ **Actualización Automática**: Sincronización directa con API Siigo

5. **🏆 Funciones PRO**: Vista previa de funcionalidades premium- ✅ **BI Export completo sin restricciones**

### **⌨️ Interfaz de Línea de Comandos**

- ✅ **Informes financieros avanzados**

```bash

# CLI para automatización### 📤 **Exportación de Datos**- ✅ **Sincronización en tiempo real**

python dataconta_free_cli.py

- ✅ **Soporte multi-usuario** (próximamente)

# Menu interactivo disponible

```#### **CSV con Datos Reales**- ✅ **API REST integrada** (próximamente)



### **Flujo de Trabajo Típico**- ✅ **10 facturas**: Exportación rápida para pruebas- ✅ **Soporte prioritario**



1. **🔐 Autenticación Automática**- ✅ **100 facturas**: Máximo permitido en versión FREE

   - La aplicación se autentica automáticamente con Siigo al iniciar

   - Verificación de credenciales en background- ✅ **CSV simple**: 5 registros ligeros para validación### 🔐 **Configuración de Licencia**



2. **📊 Visualización de KPIs**- ✅ **Sin datos demo**: 100% datos reales desde Siigo API```bash

   - Dashboard muestra métricas al abrir la aplicación

   - Datos cargados desde último archivo guardado# En su archivo .env



3. **🔄 Actualización de Datos**#### **Integración API Siigo**LICENSE_TYPE=PROFESSIONAL  # FREE, PROFESSIONAL, ENTERPRISE

   - Botón "Actualizar KPIs con Datos Reales"

   - Descarga facturas del año actual desde API- 🌐 **Descarga directa**: Facturas en tiempo real desde SiigoLICENSE_KEY=PROF-2024-TEST-DEMO-001A

   - Recálculo automático de métricas

- 🔍 **Filtros opcionales**: Por fechas, cliente ID, NIT, estado

4. **🏆 Análisis de Clientes**

   - Botón "Ver TOP 10 Clientes Detallado"  - 📊 **Doble dataset**: Encabezados + detalle de ítems# Verificación automática al iniciar

   - Consolidación automática por NIT

   - Estadísticas avanzadas con porcentajes- 📄 **Formatos múltiples**: CSV y Excel con dos hojas✅ Licencia PROFESSIONAL válida - 2000 facturas disponibles



5. **📤 Exportación de Datos**```

   - Múltiples formatos: CSV, Excel, JSON

   - Estructuras optimizadas para análisis externo### 🔍 **Consulta de Facturas**



## 🏗️ Arquitectura- **Filtros básicos**: Fecha inicio/fin, cliente, estado## 🎯 Características Principales



DataConta implementa **Arquitectura Hexagonal** (Clean Architecture) con separación completa de responsabilidades:- **Máximo 100 resultados** por consulta



```- **Visualización en tabla** con botones de acciones### ✨ **Funcionalidades Actuales (Diciembre 2024)**

📂 src/

├── 🎯 domain/                    # Dominio - Lógica de Negocio Pura- **Datos reales** desde API de Siigo- 🎫 **Sistema de Licencias de 3 Niveles**: FREE, PROFESSIONAL, ENTERPRISE con características específicas

│   ├── entities/                # Entidades de dominio

│   │   ├── invoice.py          # Facturas, clientes, productos- 🏢️ **Interfaz Gráfica Moderna**: GUI completa con PySide6 y menús dinámicos configurables (PROFESSIONAL+)

│   │   └── financial_reports.py # Reportes financieros

│   └── services/               # Servicios de dominio### 🏆 **Análisis de Top Clientes**- 📊 **Informes Financieros**: Estado de Resultados y Estado de Situación Financiera automatizados (PROFESSIONAL+)

│       └── invoice_service.py  # Lógica de negocio central

│- 📋 **Consulta de Facturas**: Obtención de facturas de venta con filtros avanzados (límites por licencia)

├── 🔄 application/              # Aplicación - Casos de Uso

│   ├── ports/                  # Interfaces (puertos)#### **Vista Dashboard**- 📤 **Exportación CSV**: Exportación directa de facturas a formato CSV normalizado (todas las licencias)

│   │   ├── interfaces.py       # Contratos abstractos

│   │   └── repositories.py     # Repositorios abstractos- 👑 **Top Cliente**: Muestra el cliente #1 con nombre optimizado- 🏢 **Business Intelligence**: Generación de modelo estrella para Power BI (PROFESSIONAL+ con límites)

│   ├── services/               # Servicios de aplicación

│   │   ├── invoice_service.py  # Coordinación de casos de uso- **Actualización automática** al cargar KPIs existentes- 🔍 **Verificación API**: Monitoreo del estado y conectividad de la API (todas las licencias)

│   │   └── export_service.py   # Servicios de exportación

│   └── use_cases/              # Casos de uso específicos- 📁 **Gestión de Archivos**: Visualización y administración de archivos generados (todas las licencias)

│       ├── invoice_use_cases.py

│       └── export_use_cases.py#### **Ventana Detallada**- 🔐 **Validación de Licencias**: Sistema robusto de autenticación de 3 niveles

│

├── 🔌 infrastructure/           # Infraestructura - Adaptadores- 🏆 **TOP 10 clientes** con rankings visuales- 📊 **Logging Avanzado**: Sistema completo de registro de actividades (todas las licencias)

│   ├── adapters/               # Adaptadores externos

│   │   ├── siigo_api_adapter.py    # Integración API Siigo- 🥇🥈🥉 **Medallitas** para los primeros 3 puestos- 🎛️ **Menús Dinámicos**: Sistema configurable vía JSON sin tocar código (PROFESSIONAL+)

│   │   ├── file_storage_adapter.py # Persistencia archivos

│   │   └── csv_export_adapter.py   # Exportación CSV- 📊 **Porcentajes** de participación en ventas totales- 🚦 **Control de Acceso**: Restricción automática de funciones según tipo de licencia

│   ├── config/                 # Configuración

│   │   └── environment_config.py   # Variables de entorno- 📈 **Estadísticas**: Top 3, Top 5 y Top 10 acumulados

│   └── factories/              # Factories para DI

│       └── service_factory.py  # Inyección de dependencias- 🆔 **Información completa**: NIT, nombre consolidado, montos### 🖥️ **Interfaz Gráfica Avanzada (PySide6)** 💼 PROFESSIONAL+

│

├── 🖥️ presentation/            # Presentación - Interfaces

│   ├── controllers/            # Controladores

│   │   └── free_gui_controller.py  # Lógica de presentación## 📁 Archivos GeneradosDataConta incluye una **interfaz gráfica completa** desarrollada con PySide6 (disponible en licencias PROFESSIONAL y ENTERPRISE):

│   ├── widgets/               # Widgets GUI

│   │   ├── dashboard_widget.py     # Dashboard principal

│   │   ├── export_widget.py        # Exportación

│   │   └── query_widget.py         # Consultas### **Estructura de Salida**#### **🎨 Características de la GUI:**

│   └── cli_interface.py       # Interfaz línea de comandos

│```- **Interfaz Moderna**: Diseño profesional con Qt6

└── 📋 ui/                      # UI - Definiciones de Interfaz

    └── main_window.py         # Ventana principal Qt📂 outputs/- **Menús Dinámicos**: Sistema de menús horizontal configurable vía JSON

```

├── 📊 facturas_reales_FREE_*.csv           # Exportaciones CSV básicas- **Informes Integrados**: Generación de informes financieros desde la interfaz

### **🔌 Principios Arquitectónicos Aplicados**

├── 📄 facturas_siigo_*.xlsx                # Exportaciones Excel con 2 hojas- **Validación de Licencia**: Indicador visual del estado y tipo de licencia

- **🎯 Separation of Concerns**: Cada capa tiene una responsabilidad específica

- **🔄 Dependency Inversion**: Dependencias apuntan hacia adentro (dominio)├── 📈 facturas_encabezados_*.csv           # Encabezados de facturas- **Gestión Visual**: Navegación intuitiva por todas las funcionalidades

- **🔌 Ports & Adapters**: Interfaces abstraen detalles de implementación

- **💉 Dependency Injection**: Inyección manual mediante factories├── 📋 facturas_detalle_*.csv               # Detalle de ítems- **Responsive Design**: Adaptable a diferentes tamaños de pantalla

- **📦 Single Responsibility**: Una clase, una responsabilidad

- **🔐 Open/Closed**: Extensible sin modificar código existente└── 📁 kpis/                                # KPIs calculados- **Control de Acceso**: Menús y funciones visibles según licencia activa



## 📊 Funcionalidades Detalladas    └── kpis_siigo_*.json                   # KPIs con metadata



### **📈 Dashboard de KPIs**```#### **🎛️ Sistema de Menús Dinámico (PROFESSIONAL+):**



**Métricas Disponibles:**```json

- 💰 **Ventas Totales**: Suma total de facturación

- 📄 **Número de Facturas**: Cantidad de documentos emitidos### **Formato KPIs JSON**{

- 🎯 **Ticket Promedio**: Valor promedio por transacción

- 👑 **Top Cliente**: Cliente con mayor facturación (consolidado por NIT)```json  "horizontal_menu": {

- 🔄 **Última Actualización**: Timestamp de sincronización

{    "inicio": {

**Características Técnicas:**

```python  "metadata": {      "label": "Inicio",

# Ejemplo de estructura KPIs

{    "generado_en": "2025-09-18T12:11:46",      "icon": "🏠",

  "metadata": {

    "generado_en": "2025-09-19T10:31:21",    "año": 2025,      "license_required": "PROFESSIONAL",

    "año": 2025,

    "version": "DataConta v1.0",    "version": "DataConta FREE v1.0",      "submenu": [...]

    "fuente": "API Siigo"

  },    "fuente": "API Siigo"    },

  "kpis": {

    "ventas_totales": 194559393.01,  },    "informes": {

    "num_facturas": 61,

    "ticket_promedio": 3189498.25,  "kpis": {      "label": "Informes", 

    "top_cliente": "Cliente NIT: 901229380",

    "ultima_sync": "10:31:21"    "ventas_totales": 194559393.01,      "icon": "📊",

  }

}    "num_facturas": 61,      "license_required": "PROFESSIONAL",

```

    "ticket_promedio": 3189498.25,      "submenu": [...]

### **🏆 Análisis Top Clientes**

    "top_cliente": "webcol",    }

**Funcionalidades Avanzadas:**

- **Consolidación por NIT**: Elimina duplicados sumando montos por cliente único    "top_5_clientes": [...],  }

- **Rankings Visuales**: Medallitas 🥇🥈🥉 para los mejores 3

- **Estadísticas Acumulativas**: Top 3, Top 5, Top 10 con porcentajes    "ventas_por_cliente": [...]}

- **Ventana Detallada**: Análisis completo en interfaz dedicada

  }```

**Ejemplo de Análisis:**

```}

🏆 TOP 3 CLIENTES:

🥇 Cliente A    | $37,128,000 (19.1%)```**Ventajas del Sistema de Menús:**

🥈 Cliente B    | $19,316,080 (9.9%)

🥉 Cliente C    | $18,802,000 (9.7%)- ✅ **Configuración Externa**: Modificar menús editando `menu_config.json`



📊 CONCENTRACIÓN:## 🔧 Instalación y Configuración- ✅ **Sin Programación**: Agregar/quitar elementos sin tocar código

📊 Top 3: 38.7% del total

📊 Top 5: 55.0% del total- ✅ **Recarga Dinámica**: Cambios aplicados sin reiniciar

📊 Top 10: 75.2% del total

```### **Prerrequisitos**- ✅ **Menús Contextuales**: Submenús profesionales con iconos



### **📤 Sistema de Exportación**- Python 3.7+- ✅ **Validación Automática**: Sistema robusto de validación de configuración



**Formatos Soportados:**- pip (gestor de paquetes)- ✅ **Control de Licencia**: Menús automáticamente habilitados/deshabilitados según licencia

- **CSV Simple**: Datos tabulares para Excel básico

- **Excel Avanzado**: Múltiples hojas con encabezados + detalles  - Acceso a API de Siigo

- **JSON Estructurado**: Para integraciones y APIs

- **Reportes de BI**: Modelo estrella para Power BI- PySide6 para interfaz gráfica### 🏗️ **Arquitectura Hexagonal Implementada**



**Estructura de Archivos Generados:**

```

📂 outputs/### **Instalación**DataConta utiliza una **Arquitectura Hexagonal** (Clean Architecture) completa con **doble interfaz**:

├── 📊 kpis/                           # KPIs calculados

│   └── kpis_siigo_2025_*.json        # Métricas con timestamp```bash

├── 📄 facturas_export_*.csv          # Exportaciones simples

├── 📋 facturas_siigo_*.xlsx          # Excel con 2 hojas# 1. Clonar o descargar el proyecto```

└── 📁 bi/                            # Business Intelligence

    ├── fact_invoices.csv             # Tabla de hechoscd dataconta📂 src/

    ├── dim_clients.csv               # Dimensión clientes

    └── dim_products.csv              # Dimensión productos├── 🎯 domain/                    # Dominio - Lógica de Negocio Pura

```

# 2. Instalar dependencias│   ├── entities/                # Entidades: Invoice, Cliente, Vendedor, FinancialReports

### **🔍 Motor de Consultas**

pip install PySide6 pandas openpyxl requests python-dotenv│   │   ├── invoice.py          # Entidades de facturación

**Filtros Disponibles:**

- **Rango de Fechas**: Período específico de facturación│   │   └── financial_reports.py # Entidades de informes financieros

- **Cliente por ID**: Filtro por cliente específico

- **Estado de Factura**: Pagadas, pendientes, anuladas# 3. Configurar API de Siigo│   └── services/                # Servicios de dominio

- **Monto Mínimo/Máximo**: Filtro por rangos de valor

# Crear archivo .env con sus credenciales:│       └── financial_reports_service.py

**Límites y Rendimiento:**

- ⚡ **Consulta rápida**: 10-100 facturas en < 3 segundosSIIGO_API_URL=https://api.siigo.com├── 🔄 application/              # Aplicación - Casos de Uso

- 📊 **Consulta masiva**: Hasta 1,000 facturas en < 30 segundos  

- 🔄 **Paginación automática**: Manejo transparente de grandes volúmenesSIIGO_USER=su_usuario@empresa.com│   ├── ports/interfaces.py     # Puertos (abstracciones)

- 💾 **Cache inteligente**: Optimización para consultas repetitivas

SIIGO_ACCESS_KEY=su_clave_de_acceso│   ├── services/                # Servicios de aplicación

## ⚙️ Configuración

PARTNER_ID=SandboxSiigoAPI│   │   ├── InvoiceExportService.py

### **Variables de Entorno (.env)**

```│   │   └── BIExportService.py

```env

# === API DE SIIGO ===│   ├── use_cases/               # Casos de uso

SIIGO_API_URL=https://api.siigo.com

SIIGO_USERNAME=su_usuario@empresa.com### **Ejecutar la Aplicación**│   │   ├── invoice_use_cases.py

SIIGO_ACCESS_KEY=MjNhMTM3M2QtZWU3YS00ZTc5LThjOGQtMmE2ZDg4Y2JmMDQw...

```bash│   │   └── financial_reports_use_cases.py

# === CONFIGURACIÓN DE LA APLICACIÓN ===

APP_NAME=DataConta# Iniciar interfaz gráfica (RECOMENDADO)│   └── dtos/                    # Data Transfer Objects

APP_VERSION=1.0.0

ENVIRONMENT=productionpython dataconta_free_gui.py│       └── financial_reports_dtos.py



# === LÍMITES Y RENDIMIENTO ===├── 🔌 infrastructure/           # Infraestructura - Adaptadores

MAX_INVOICES_PER_QUERY=1000

CACHE_EXPIRATION_HOURS=24# La ventana se abrirá maximizada automáticamente│   ├── adapters/               # Adaptadores para servicios externos

REQUEST_TIMEOUT_SECONDS=30

```│   │   ├── siigo_api_adapter.py

# === LOGGING ===

LOG_LEVEL=INFO│   │   ├── license_validator_adapter.py

LOG_FILE=app.log

LOG_MAX_SIZE_MB=50## 🎯 Cómo Usar DataConta FREE│   │   ├── file_storage_adapter.py



# === ARCHIVOS DE SALIDA ===│   │   ├── csv_file_adapter.py

OUTPUT_DIRECTORY=outputs

KPI_DIRECTORY=outputs/kpis### **1. Iniciar la Aplicación**│   │   └── financial_reports_repository.py

EXPORT_DIRECTORY=outputs/exports

```- La ventana se abre **maximizada** automáticamente│   ├── config/                 # Configuración



### **Configuración de API Siigo**- Los KPIs se cargan desde el último archivo guardado│   │   ├── environment_config.py



1. **Obtener Credenciales**: - El dashboard muestra los datos más recientes disponibles│   │   └── dynamic_menu_config.py

   - Registrarse en [Siigo Developer Portal](https://developer.siigo.com)

   - Crear aplicación y obtener credenciales│   └── factories/              # Factories para inyección de dependencias



2. **Configurar Partner ID**:### **2. Actualizar KPIs**│       └── financial_reports_factory.py

   ```env

   PARTNER_ID=SandboxSiigoAPI  # Para pruebas- Presionar **"🔄 Actualizar KPIs con Datos Reales"**├── 🖥️ presentation/            # Presentación - Interfaces

   PARTNER_ID=SiigoAPI         # Para producción

   ```- La aplicación descarga facturas del año actual desde Siigo│   ├── cli_interface.py        # Interfaz CLI



3. **Permisos Requeridos**:- Los KPIs se recalculan y actualizan en el dashboard│   ├── gui_interface.py        # Interfaz GUI (PySide6)

   - Lectura de facturas (`invoices:read`)

   - Información de clientes (`customers:read`)- Se crea un nuevo archivo JSON con los datos actualizados│   └── financial_reports_integration.py

   - Datos de productos (`products:read`)

└── 📋 tests/                   # Tests unitarios

### **Personalización de la Interfaz**

### **3. Ver Top de Clientes**    └── test_bi_export.py

**Colores del Dashboard** (en `dashboard_widget.py`):

```python- Presionar **"👑 Ver TOP 10 Clientes Detallado"**```

COLORS = {

    'ventas_totales': '#4caf50',    # Verde- Se abre ventana con tabla completa de mejores clientes

    'num_facturas': '#2196f3',      # Azul

    'ticket_promedio': '#ff5722',   # Rojo- Incluye medallitas, porcentajes y estadísticas avanzadas### 💻 **Modalidades de Ejecución**

    'top_cliente': '#ff9800',       # Naranja

    'ultima_sync': '#9c27b0'        # Morado- Datos consolidados por NIT para evitar duplicados

}

```#### **🖥️ Interfaz Gráfica (GUI) - Recomendado**



**Límites Configurables**:### **4. Exportar Datos**```bash

```python

# En free_gui_controller.py- Ir a pestaña **"📤 Exportar CSV"**python main_gui.py

MAX_FACTURAS_DISPLAY = 100

TOP_CLIENTES_MOSTRAR = 10- Elegir entre 10, 100 o 5 facturas de muestra```

KPI_REFRESH_INTERVAL = 30  # segundos

```- Los archivos se guardan en la carpeta `outputs/`- **Interfaz moderna** con PySide6



## 🔧 Desarrollo- Datos 100% reales desde Siigo API- **Menús dinámicos** configurables



### **Estructura de Desarrollo**- **Informes integrados** con visualización



```bash### **5. API Siigo Directa**- **Navegación intuitiva** por todas las funciones

# Configurar entorno de desarrollo

python -m venv .venv- Ir a pestaña **"🌐 API Siigo"**

source .venv/bin/activate  # Linux/Mac

.venv\Scripts\activate     # Windows- Configurar filtros opcionales (fechas, cliente, NIT, estado)#### **⌨️ Interfaz de Línea de Comandos (CLI)**



# Instalar dependencias de desarrollo- Descargar a CSV o Excel con estructura completa```bash

pip install -r requirements-dev.txt

- Obtener encabezados + detalles de facturaspython main_hexagonal.py          # CLI completa

# Herramientas de desarrollo

pip install black flake8 mypy pytestpython dataconta_advanced.py      # CLI con menús avanzados

```

## 📊 Ejemplo de Análisis Real```

### **Testing**



```bash

# Ejecutar todos los tests### **Datos de Ejemplo (Empresa Real)**## 🚀 Módulos Implementados

pytest tests/

```

# Tests con cobertura

pytest --cov=src tests/🏆 TOP 3 CLIENTES:### 1. **�️ Módulo de Interfaz Gráfica (GUI)**



# Tests específicos🥇 webcol                    | $37,128,000 (19.1%)**Nuevo - Implementado Septiembre 2025**

pytest tests/test_siigo_client.py

pytest tests/test_invoice_service.py🥈 Cliente NIT: 66716838     | $19,316,080 (9.9%)  

```

🥉 Cliente NIT: 21334607     | $18,802,000 (9.7%)- **Framework**: PySide6 (Qt6) para interfaz moderna y responsive

### **Calidad de Código**

- **Arquitectura**: Integración completa con arquitectura hexagonal

```bash

# Formateo automático📈 ESTADÍSTICAS:- **Menús Dinámicos**: Sistema JSON-configurable sin necesidad de programar

black src/ tests/

💰 Ventas totales: $194,559,393- **Informes Visuales**: Generación de informes financieros desde la GUI

# Linting

flake8 src/ tests/📄 Total facturas: 61- **Validación Visual**: Indicador en tiempo real del estado de licencia



# Type checking🎯 Ticket promedio: $3,189,498- **Configuración Externa**: Personalización de menús vía `menu_config.json`

mypy src/

```📊 Top 3 representa: 38.7% del total



### **Estructura de Tests**📊 Top 5 representa: 55.0% del total### 2. **📊 Módulo de Informes Financieros**



``````**Nuevo - Implementado Septiembre 2025**

📂 tests/

├── 🧪 unit/                      # Tests unitarios

│   ├── domain/                   # Tests de dominio

│   ├── application/              # Tests de aplicación  ### **Beneficios del Análisis**#### **📈 Estado de Resultados (P&L)**

│   └── infrastructure/           # Tests de infraestructura

├── 🔌 integration/               # Tests de integración- ✅ **Identifica clientes clave** que generan la mayor facturación- Ingresos operacionales automáticos desde facturas de Siigo

│   ├── test_siigo_api.py        # Integración API

│   └── test_file_storage.py     # Persistencia- ✅ **Consolida por NIT** para eliminar duplicados y obtener el monto real- Cálculo de costos de ventas basado en productos facturados  

└── 🎯 e2e/                      # Tests end-to-end

    └── test_complete_flow.py    # Flujo completo- ✅ **Calcula porcentajes** de participación en ventas totales- Gastos operacionales categorizados automáticamente

```

- ✅ **Análisis de concentración** para estrategias comerciales- Utilidad neta calculada con impuestos aplicables

### **Convenciones de Código**

- ✅ **Datos actualizados** directamente desde Siigo API- Exportación a CSV con formato contable estándar

- **Naming**: `snake_case` para variables y funciones, `PascalCase` para clases

- **Type Hints**: Obligatorios en todas las funciones públicas

- **Docstrings**: Google style para documentación

- **Error Handling**: Excepciones específicas, nunca `except Exception:`## 🔍 Características Técnicas#### **⚖️ Estado de Situación Financiera (Balance General)**

- **Logging**: Usar logger configurado, nunca `print()` en producción

- **Activos Corrientes**: Efectivo, cuentas por cobrar, inventarios

## 📈 Casos de Uso

### **Arquitectura**- **Activos No Corrientes**: Propiedad, planta y equipo

### **🏢 Pequeñas y Medianas Empresas**

- **Patrón MVC**: Separación clara de presentación, lógica y datos- **Pasivos Corrientes**: Cuentas por pagar, obligaciones laborales

**Problemas que Resuelve:**

- ✅ **Control de Facturación**: Seguimiento automático de ventas mensuales- **API REST**: Integración robusta con Siigo mediante OAuth- **Pasivos No Corrientes**: Préstamos a largo plazo

- ✅ **Análisis de Clientes**: Identificación de clientes más rentables  

- ✅ **Exportación Contable**: Datos listos para contador externo- **Gestión de Errores**: Manejo completo de excepciones y logs- **Patrimonio**: Capital social, utilidades retenidas

- ✅ **Dashboard Ejecutivo**: Métricas clave para toma de decisiones

- **Persistencia**: Almacenamiento automático de KPIs en JSON- **Validación Automática**: Verificación de ecuación contable

**Ejemplo de Implementación:**

```bash

# Rutina diaria automatizada

python dataconta_free_cli.py --update-kpis --export-csv### **Rendimiento**#### **🔗 Integración con API de Siigo**

# Genera reporte diario automático

```- ⚡ **Inicio rápido**: < 3 segundos- Extracción automática de datos contables



### **💼 Consultores Financieros**- 📊 **Cálculo KPIs**: Hasta 100 facturas en < 5 segundos  - Sincronización en tiempo real con el sistema contable



**Casos de Uso Específicos:**- 🖥️ **Interfaz responsiva**: 60 FPS en operaciones UI- Mapeo inteligente de cuentas contables

- 📊 **Análisis de Cartera**: Concentración de riesgo por cliente

- 📈 **Reportes a Clientes**: Dashboards profesionales automatizados- 💾 **Memoria eficiente**: < 100MB RAM en uso típico- Validación de coherencia entre informes

- 🔍 **Auditorías Express**: Validación rápida de datos contables

- 📄 **Informes Regulatorios**: Estructura compatible con entes de control



### **🚀 Startups y Emprendedores**### **Tecnologías**### 3. **�📋 Módulo de Consulta de Facturas**



**Beneficios Clave:**- **PySide6**: Interfaz gráfica moderna basada en Qt6- Filtros por fecha de creación (rango)

- 💰 **Costo Cero**: Solución gratuita vs software comercial

- ⚡ **Implementación Rápida**: Funcional en menos de 10 minutos- **Pandas**: Procesamiento eficiente de datos- Filtros por ID de documento específico

- 📱 **Interfaz Moderna**: Dashboard profesional para presentaciones

- 🔌 **Integración Directa**: No requiere exportar/importar datos manualmente- **Requests**: Comunicación HTTP con API Siigo- Paginación automática para grandes volúmenes



### **🏭 Empresas en Crecimiento**- **JSON**: Persistencia ligera de configuración y KPIs- Guardado automático en formato JSON con timestamp



**Escalabilidad:**

```python

# Configuración para alto volumen## 🛠️ Personalización### 4. **📤 Módulo de Exportación CSV**

MAX_INVOICES_PER_QUERY=5000

CACHE_EXPIRATION_HOURS=1- Transformación de facturas a formato CSV estructurado

PARALLEL_REQUESTS=5

```### **Colores del Dashboard**- Normalización de datos con combinación producto-pago



## 🚨 Solución de ProblemasLos KPIs usan colores distintivos configurables:- Campos calculados automáticamente (subtotales, impuestos)



### **❌ Errores Comunes**- 💰 Ventas: Verde (`#4caf50`)- Validación de estructura de datos



**Error de Autenticación:**- 📄 Facturas: Azul (`#2196f3`) - Configuración de registros máximos

```

ERROR: Authentication failed with Siigo API- 🎯 Ticket: Rojo (`#ff5722`)

```

**Solución:**- 👑 Top Cliente: Naranja (`#ff9800`)### 5. **🏢 Módulo Business Intelligence (BI)**

1. Verificar `SIIGO_USERNAME` y `SIIGO_ACCESS_KEY` en `.env`

2. Confirmar conectividad con `ping api.siigo.com`- 🔄 Actualización: Morado (`#9c27b0`)**Actualizado - Septiembre 2025**

3. Revisar logs en `app.log` para detalles específicos



**Error de Dependencias GUI:**

```### **Límites Configurables**Genera un **modelo estrella completo** optimizado para Power BI:

ModuleNotFoundError: No module named 'PySide6'

``````python

**Solución:**

```bash# En dataconta_free_gui.py se pueden ajustar:#### **📊 Tablas Generadas:**

pip install PySide6>=6.7.0

# Si persiste el problema:MAX_FACTURAS_FREE = 100        # Máximo para exportación- **fact_invoices.csv**: Tabla de hechos principal

pip install --upgrade PySide6

```TOP_CLIENTES_MOSTRAR = 10      # Clientes en ventana detallada  - Métricas: cantidades, precios, descuentos, totales



**KPIs No Se Actualizan:**KPI_REFRESH_SECONDS = 2        # Tiempo para actualizar UI  - Claves foráneas a todas las dimensiones

```

No se pudieron cargar KPIs existentes```  - 202 registros procesados (ejemplo actual)

```

**Solución:**

1. Verificar permisos de escritura en carpeta `outputs/`

2. Confirmar que existe `outputs/kpis/` ## 🚨 Solución de Problemas- **dim_clients.csv**: Dimensión de clientes

3. Presionar "Actualizar KPIs con Datos Reales" para generar nuevos datos

  - Información completa del cliente

### **🔧 Diagnóstico Avanzado**

### **La aplicación no inicia**  - Tipo de cliente (Persona Natural/Jurídica)

**Activar Logging Detallado:**

```env```bash  - Régimen fiscal extraído inteligentemente

LOG_LEVEL=DEBUG

```# Verificar instalación de PySide6



**Test de Conectividad:**pip install PySide6- **dim_sellers.csv**: Dimensión de vendedores

```bash

python -c "  - Datos completos de vendedores

from src.infrastructure.adapters.siigo_api_adapter import SiigoAPIAdapter;

import os;# Si persiste el error, usar versión específica  - Identificación y información de contacto

from dotenv import load_dotenv;

load_dotenv();pip install PySide6==6.7.0

adapter = SiigoAPIAdapter(os.getenv('SIIGO_USERNAME'), os.getenv('SIIGO_ACCESS_KEY'));

print('✅ Conectividad OK' if adapter.test_connection() else '❌ Error de conexión')```- **dim_products.csv**: Dimensión de productos

"

```  - Catálogo completo de productos



**Verificación de Archivos:**### **No carga KPIs existentes**  - Códigos, descripciones y categorías

```bash

# Listar archivos generados- Verificar que existe la carpeta `outputs/kpis/`

ls -la outputs/kpis/

ls -la outputs/- Revisar permisos de lectura en el directorio- **dim_payments.csv**: Dimensión de métodos de pago



# Verificar estructura JSON- Comprobar formato JSON de archivos KPIs existentes  - Métodos de pago normalizados

python -m json.tool outputs/kpis/kpis_siigo_2025_*.json

```  - Referencias y valores



### **⚡ Optimización de Rendimiento**### **Error de autenticación Siigo**



**Para Grandes Volúmenes de Datos:**- Verificar credenciales en archivo `.env`- **dim_dates.csv**: Dimensión temporal

```python

# Configuración optimizada- Confirmar conectividad a internet  - Fechas formateadas para análisis temporal

MAX_INVOICES_PER_QUERY=500  # Reducir para conexiones lentas

CACHE_EXPIRATION_HOURS=6    # Cache más frecuente- Revisar logs en consola para detalles del error  - Compatible con filtros de Power BI

REQUEST_TIMEOUT_SECONDS=60  # Timeout extendido

```



**Monitoreo de Memoria:**### **Top de clientes muestra datos incorrectos**#### **🧠 Características Inteligentes del BI:**

```bash

# Durante ejecución de la aplicación- Presionar "🔄 Actualizar KPIs con Datos Reales"- **Extracción Automática de Reglas de Negocio**: Identifica tipo de cliente y régimen fiscal desde observaciones

ps aux | grep python

top -p $(pgrep -f dataconta)- Esperar a que complete la descarga desde Siigo- **Deduplicación Inteligente**: Elimina duplicados manteniendo integridad referencial

```

- Los duplicados se consolidan automáticamente por NIT- **Generación de Claves Únicas**: Claves consistentes para todas las dimensiones

## 📄 Documentación Técnica

- **Validación de Esquema**: Verificación automática de la estructura generada

### **🔌 APIs Disponibles**

## 📈 Casos de Uso- **Estadísticas de Procesamiento**: Métricas detalladas de la exportación

**Siigo API Endpoints Utilizados:**

```http

POST /auth

GET /v1/invoices### **Pequeñas Empresas**### 6. **🔐 Módulo de Seguridad y Validación**

GET /v1/invoices/{id}

GET /v1/customers- ✅ Control básico de facturación mensual- Validación de licencias online/offline

GET /v1/products

```- ✅ Identificación de mejores clientes- Autenticación segura con tokens JWT



**Documentación Oficial**: [Siigo API Docs](https://api.siigo.com/docs)- ✅ Exportación para contabilidad externa- Manejo robusto de credenciales



### **📊 Estructura de Datos**- ✅ Análisis de tendencias de ventas- Configuración por variables de entorno



**Entidades Principales:**

```python

@dataclass### **Startups y Emprendedores**### 7. **📊 Módulo de Logging y Monitoreo**

class Invoice:

    id: str- ✅ Dashboard visual para presentaciones- Niveles de log configurables (INFO, WARNING, ERROR)

    date: datetime

    due_date: datetime- ✅ KPIs básicos para seguimiento de crecimiento- Registro tanto en consola como en archivo

    customer: Customer

    items: List[InvoiceItem]- ✅ Datos limpios para análisis en Excel- Tracking detallado de operaciones

    total: Decimal

    taxes: Decimal- ✅ Integración directa con Siigo sin costos adicionales- Métricas de rendimiento

    status: InvoiceStatus



@dataclass  

class Customer:### **Consultores Financieros**### 8. **🎛️ Sistema de Menús Dinámicos**

    id: str

    name: str- ✅ Análisis rápido de cartera de clientes**Nuevo - Implementado Septiembre 2025**

    document_id: str

    email: Optional[str]- ✅ Identificación de concentraciones de riesgo

    phone: Optional[str]

```- ✅ Datos exportables para informes a terceros- **Configuración JSON**: Menús completamente editables externamente



### **🏗️ Patrones de Diseño Implementados**- ✅ Herramienta gratuita para servicios básicos- **Sin Programación**: Agregar/modificar menús sin tocar código



- **🏭 Factory Pattern**: `ServiceFactory` para creación de servicios- **Recarga Dinámica**: Cambios aplicados sin reiniciar aplicación

- **🔌 Adapter Pattern**: `SiigoAPIAdapter` para integración externa

- **📊 Repository Pattern**: `InvoiceRepository` para abstracción de datos## 📄 Limitaciones de la Versión FREE- **Validación Robusta**: Sistema de validación automática de configuración

- **🎯 Strategy Pattern**: Múltiples exportadores (CSV, Excel, JSON)

- **👁️ Observer Pattern**: Actualización automática de UI- **Iconos y Estilos**: Soporte completo para iconos emoji y estilos CSS



### **📈 Métricas y Monitoring**- 📊 **Máximo 100 facturas** por consulta de exportación



**Logging Structured:**- 🔍 **Filtros básicos** en consulta de facturas## 💻 Interfaces Disponibles con Control de Licencias

```json

{- 📈 **KPIs básicos** (5 indicadores principales)

  "timestamp": "2025-09-19T10:31:21.987",

  "level": "INFO", - 👑 **Top 10 clientes** como máximo en análisis detallado### **🖥️ Interfaz Gráfica (GUI) - PROFESSIONAL+ 💼**

  "module": "siigo_client",

  "message": "✅ Autenticación Siigo exitosa",- 📱 **Solo interfaz gráfica** (no incluye CLI avanzada)```

  "metadata": {

    "response_time_ms": 503,🖥️ DATACONTA - Sistema Avanzado de Gestión

    "invoices_count": 61

  }## 📞 Soporte┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓

}

```┃ 🏠 Inicio  ❓ Ayuda  🔧 Herramientas  📊 Reportes ┃  ← Menús según licencia



**Performance Benchmarks:**### **Documentación**┃ 📄 Licencia: 💼 PROFESSIONAL (2000 facturas)    ┃  ← Estado y límites  

- 🚀 **Inicio de aplicación**: < 3 segundos

- 📊 **Cálculo de KPIs**: 100 facturas en < 5 segundos- README completo con ejemplos de uso┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

- 🏆 **Top de clientes**: Análisis completo en < 2 segundos

- 📤 **Exportación CSV**: 1,000 registros en < 10 segundos- Comentarios detallados en el código fuente



## 🤝 Contribución- Mensajes de error descriptivos en la aplicación📊 Funciones Disponibles según Licencia:



### **Como Contribuir**├── 📈 Estado de Resultados (PROFESSIONAL+)



1. **Fork** del repositorio### **Comunidad**├── ⚖️ Estado de Situación Financiera (PROFESSIONAL+)

2. **Crear rama feature**: `git checkout -b feature/nueva-funcionalidad`

3. **Implementar** siguiendo convenciones de código- Issues en GitHub para reportar problemas├── 🏢 Exportación BI (PROFESSIONAL+ con límites)

4. **Agregar tests** unitarios y de integración

5. **Documentar** cambios en README y docstrings- Discusiones para preguntas y sugerencias└── 📋 Consulta de Facturas (con límites por licencia)

6. **Commit**: `git commit -m "feat: agregar nueva funcionalidad"`

7. **Push**: `git push origin feature/nueva-funcionalidad`  - Ejemplos de uso en la documentación```

8. **Crear Pull Request** con descripción detallada



### **Guías de Contribución**

---### **⌨️ Interfaz CLI - Todas las Licencias 🆓💼🏢**

- 📝 **Issues**: Reportar bugs o solicitar funcionalidades

- 💡 **Discussions**: Preguntas y propuestas de mejora```

- 🧪 **Tests**: Mantener cobertura > 80%

- 📚 **Documentación**: Actualizar README con cambios significativos**🎁 DataConta FREE** - Gestión financiera moderna y gratuita🏢 DATACONTA - SIIGO API

- 🎯 **Code Review**: Mínimo 1 aprobación para merge

==================================================

## 📄 Licencia y Información Legal

**📅 Versión**: 1.0.0 FREE  📄 Licencia Activa: FREE (500 facturas máximo)

Este proyecto está licenciado bajo **MIT License**. Ver archivo `LICENSE` para detalles completos.

**🔄 Última actualización**: Septiembre 18, 2025  ==================================================

### **⚖️ Términos de Uso**

**🏷️ Licencia**: Gratuita para uso comercial y personal1. 📋 Consultar Facturas de Venta ✅ (límite 500)

- ✅ **Uso Comercial Permitido**

- ✅ **Modificación y Distribución Libre**2. 🔍 Verificar Estado de la API ✅

- ✅ **Uso Privado Sin Restricciones**

- ❗ **Sin Garantía Explícita** - Usar bajo su propio riesgo**🚀 ¡Prueba DataConta FREE y optimiza tu gestión financiera hoy mismo!**3. 📁 Ver Archivos de Salida ✅

- 📄 **Incluir Aviso de Copyright** en distribuciones4. 📤 Exportar Facturas a CSV ✅

5. 🏢 Exportar a Business Intelligence ❌ (PROFESSIONAL+)

### **🔐 Consideraciones de Seguridad**6. 📊 Estado de Resultados ❌ (PROFESSIONAL+)

7. ⚖️ Estado de Situación Financiera ❌ (PROFESSIONAL+)

- 🔑 **Credenciales Seguras**: Nunca commitear archivos `.env`8. 🎫 Información de Licencia ✅

- 🌐 **HTTPS Obligatorio**: Todas las comunicaciones con API cifradas0. 🚪 Salir

- 📊 **Datos Sensibles**: No almacenar información financiera en logs==================================================

- 🔒 **Variables de Entorno**: Usar para configuración sensible```



---### **🎛️ Interfaz CLI Avanzada - Con Control de Acceso**

```

## 📞 Soporte y ContactoDATACONTA - Sistema de Menús por Licencia

┌─────────────────────────────────┐

### **📧 Información de Contacto**│ Licencia: PROFESSIONAL          │

│ Límite: 2000 facturas          │

- **Desarrollador**: WebcolGroup│ Funciones: GUI + BI Limitado    │

- **Repositorio**: [GitHub Repository](#)└─────────────────────────────────┘

- **Documentación**: Ver carpeta `docs/` para guías detalladas● Menú Principal ✅

- **Issues**: Usar GitHub Issues para reportes y solicitudes● Menú de Informes Financieros ✅ (PROFESSIONAL+) 

● Menú de Exportación BI ✅ (PROFESSIONAL+ limitado)

### **🆘 Obtener Ayuda**● Menú de Configuración ✅

● Validación de Licencias Automática ✅

1. **📖 Consultar Documentación**: README y docstrings en código```

2. **🔍 Buscar Issues Existentes**: Problemas similares ya reportados  

3. **💬 Crear Nuevo Issue**: Para problemas no documentados## 📊 Capacidades de Exportación e Informes según Licencia

4. **📧 Contacto Directo**: Para consultas comerciales o soporte premium

### **📈 Informes Financieros Automatizados** 💼 PROFESSIONAL+ 

### **🚀 Estado del Proyecto**- **Estado de Resultados**: Ingresos, gastos, utilidad neta automáticos

- **Estado de Situación Financiera**: Balance completo con validación contable

- ✅ **Estado**: Activamente mantenido- **Integración Siigo**: Extracción directa de datos contables

- 🔄 **Última Actualización**: Septiembre 2025- **Formato Estándar**: Compatible con normativas contables colombianas

- 📈 **Roadmap**: Ver archivo `ROADMAP.md` para funcionalidades planificadas- **Exportación Múltiple**: CSV, PDF (próximamente), Excel (próximamente)

- 🏷️ **Versión Estable**: v1.0.0- **🚫 Restricción**: Requiere licencia PROFESSIONAL o superior



---### **Exportación Business Intelligence** 💼 PROFESSIONAL+ con Límites

- **Modelo estrella completo** para análisis avanzado

**🎯 DataConta - Gestión financiera moderna con arquitectura limpia**  - **6 archivos CSV** interconectados

*Desarrollado con ❤️ siguiendo principios SOLID y mejores prácticas de software*- Optimizado para **Power BI**, **Tableau**, **Excel**

- **Métricas de procesamiento** en tiempo real

**📊 Dashboard • 🔌 API Integration • 🏗️ Clean Architecture • 📈 Real-time KPIs**- **Validación automática** del esquema generado
- **🔢 Límites por Licencia**:
  - FREE: ❌ No disponible
  - PROFESSIONAL: ✅ Hasta 1,000 registros en tabla principal
  - ENTERPRISE: ✅ Sin límites

### **Exportación Simple CSV** 🆓 Todas las Licencias
- Facturas normalizadas en formato tabular
- Combinaciones producto-pago por fila
- Campos calculados automáticamente
- **🔢 Límites por Licencia**:
  - FREE: ✅ Hasta 500 facturas
  - PROFESSIONAL: ✅ Hasta 2,000 facturas
  - ENTERPRISE: ✅ Sin límites

### **Formatos de Salida Disponibles**
```
📂 outputs/
├── 📄 invoices_*.json              # Respuestas brutas de API
├── 📊 invoices_export_*.csv        # Exportación simple CSV
├── 📈 financial_reports/           # Informes financieros ⭐ NUEVO
│   ├── estado_resultados_*.csv    # Estado de Resultados
│   ├── balance_general_*.csv      # Estado Situación Financiera
│   └── informe_completo_*.pdf     # Informe consolidado (próximamente)
└── 📁 bi/                          # Modelo estrella BI
    ├── fact_invoices.csv          # Tabla de hechos principal
    ├── dim_clients.csv            # Dimensión clientes
    ├── dim_sellers.csv            # Dimensión vendedores  
    ├── dim_products.csv           # Dimensión productos
    ├── dim_payments.csv           # Dimensión métodos pago
    └── dim_dates.csv              # Dimensión temporal
```

## 🔧 Instalación y Configuración

### **Prerrequisitos**
- Python 3.7+ (Testado en Python 3.13.4)
- pip (gestor de paquetes)
- Acceso a API de Siigo
- **PySide6** (para interfaz gráfica)

### **Instalación Rápida**
```bash
# 1. Clonar repositorio
git clone <url-repositorio>
cd dataconta

# 2. Instalar dependencias completas
pip install -r requirements.txt

# 3. Configurar variables de entorno
copy .env.template .env
# Editar .env con sus credenciales

# 4. Verificar instalación GUI (opcional)
python main_gui.py --version
```

### **Dependencias Principales**
```ini
# Core dependencies
requests>=2.31.0           # API HTTP requests
python-dotenv>=1.0.0       # Variables de entorno

# GUI dependencies (PySide6 for modern Qt interface)
PySide6>=6.7.0            # Interfaz gráfica moderna

# Development dependencies (optional)
pytest>=7.4.0             # Tests unitarios
black>=23.0.0             # Code formatting
flake8>=6.0.0             # Linting
mypy>=1.5.0               # Type checking
```

### **Configuración .env con Sistema de Licencias**
```env
# API de Siigo
SIIGO_API_URL=https://api.siigo.com
SIIGO_USERNAME=su_usuario_siigo
SIIGO_ACCESS_KEY=su_clave_acceso

# Sistema de Licencias ⭐ NUEVO
LICENSE_TYPE=PROFESSIONAL      # FREE, PROFESSIONAL, ENTERPRISE
LICENSE_KEY=PROF-2024-TEST-DEMO-001A

# Validación de Licencia (Opcional)
LICENSE_URL=https://servidor-licencias.com/validate

# Logging (Opcional)
LOG_LEVEL=INFO
LOG_FILE=app.log
```

## 🏃‍♂️ Uso de la Aplicación

### **🖥️ Ejecutar Interfaz Gráfica (PROFESSIONAL+) 💼**
```bash
python main_gui.py
```
**Características de la GUI:**
- ✅ Interfaz moderna y profesional con PySide6
- ✅ Menús dinámicos configurables vía JSON con control de licencia
- ✅ Informes financieros integrados (PROFESSIONAL+)
- ✅ Validación de licencia visual en tiempo real
- ✅ Navegación intuitiva con restricciones automáticas por licencia
- 🚫 **Solo disponible en licencias PROFESSIONAL y ENTERPRISE**

### **⌨️ Ejecutar Interfaz CLI (Todas las Licencias) 🆓💼🏢**
```bash
# CLI básica con validación de licencia
python main_hexagonal.py

# CLI con menús avanzados y control de acceso
python dataconta_advanced.py
```
**Funciones disponibles según licencia:**
- **FREE**: Consulta facturas (500 max), exportación CSV básica, verificación API
- **PROFESSIONAL**: Todo lo anterior + hasta 2,000 facturas, informes financieros, BI limitado
- **ENTERPRISE**: Sin restricciones, todas las funciones disponibles

### **🎫 Verificar Estado de Licencia**
```bash
# Ver información detallada de licencia activa
python main_hexagonal.py
# Seleccionar opción: "8. 🎫 Información de Licencia"

# Resultado ejemplo:
📄 INFORMACIÓN DE LICENCIA
════════════════════════════════════════════════
🎫 Tipo de Licencia: PROFESSIONAL
🔑 Clave: PROF-2024-TEST-DEMO-001A
📊 Límite de Facturas: 2,000
🏢️ Acceso GUI: ✅ Habilitado
📈 Informes Financieros: ✅ Habilitado  
🔍 Business Intelligence: ✅ Limitado (1,000 registros)
════════════════════════════════════════════════
```

### **🎛️ Personalizar Menús GUI**
```bash
# Editar configuración de menús
notepad menu_config.json

# Estructura ejemplo:
{
  "horizontal_menu": {
    "nuevo_menu": {
      "label": "Mi Menú",
      "icon": "🆕",
      "enabled": true,
      "submenu": [...]
    }
  }
}

# Los cambios se aplican automáticamente
```

### **Flujo de Trabajo Típico**

#### **🖥️ Usando la GUI:**
1. **Ejecutar**: `python main_gui.py`
2. **Verificar Licencia**: Status visible en la barra verde superior
3. **Generar Informes**: Click en menús → Seleccionar informe deseado
4. **Configurar**: Usar menú "Herramientas" para ajustes
5. **Ver Resultados**: Archivos generados automáticamente en `outputs/`

#### **⌨️ Usando la CLI:**
1. **🔍 Verificar Estado API** (Opción 2)
   - Confirma conectividad con Siigo
   - Valida credenciales y licencia

2. **� Generar Informes Financieros** (Opciones 6-7) ⭐
   - Estado de Resultados automático
   - Estado de Situación Financiera
   - Datos extraídos directamente de Siigo

3. **�📋 Consultar Facturas** (Opción 1)
   - Aplica filtros según necesidad
   - Visualiza resultados en consola
   - Datos guardados automáticamente

4. **🏢 Exportar a BI** (Opción 5)
   - Configura parámetros de exportación
   - Procesa facturas a modelo estrella
   - Genera 6 archivos CSV listos para análisis

5. **📁 Ver Archivos** (Opción 3)
   - Lista todos los archivos generados
   - Muestra tamaños y fechas de modificación

## 📈 Estadísticas de Rendimiento Actual

**Ejemplo de Procesamiento BI (Septiembre 2025)**:
- ✅ **202 facturas** procesadas exitosamente
- 📊 **6 tablas** del modelo estrella generadas
- 👥 **1 cliente único** identificado
- 🏪 **1 vendedor único** procesado
- 📦 **60+ productos únicos** catalogados
- 💳 **1 método de pago** normalizado
- 📅 **Múltiples fechas** en dimensión temporal

**Rendimiento GUI (Septiembre 2025)**:
- ⚡ **Inicio rápido**: < 3 segundos en hardware estándar
- 🎛️ **Menús dinámicos**: Carga desde JSON en < 100ms
- 📊 **Informes**: Estado de Resultados generado en < 5 segundos
- 🖥️ **Interfaz responsiva**: 60 FPS en operaciones UI
- 💾 **Memoria eficiente**: < 150MB RAM en uso típico

**Capacidad de Procesamiento**:
- 📋 **Facturas**: Hasta 10,000 facturas en una sola consulta
- 🏢 **Exportación BI**: Procesa 1,000+ facturas/minuto
- 📊 **Informes financieros**: Genera balance completo en < 10 segundos
- 🔍 **API Siigo**: 100 consultas/minuto sin throttling

## 🛠️ Desarrollo y Arquitectura

### **Principios SOLID Aplicados**
- ✅ **S**ingle Responsibility: Cada clase una responsabilidad
- ✅ **O**pen/Closed: Extensible sin modificar código existente
- ✅ **L**iskov Substitution: Implementaciones intercambiables
- ✅ **I**nterface Segregation: Interfaces específicas y cohesivas
- ✅ **D**ependency Inversion: Inyección de dependencias

### **Mejores Prácticas Implementadas**
- ✅ **Type Hints** completos en todo el código
- ✅ **Docstrings** para funciones y clases
- ✅ **Manejo robusto de excepciones**
- ✅ **Logging estructurado** y consistente
- ✅ **Separación clara de responsabilidades**
- ✅ **Configuración por variables de entorno**
- ✅ **Validación exhaustiva de datos**
- ✅ **Código limpio y mantenible**

### **Testing**
```bash
# Ejecutar tests unitarios
pytest tests/

# Test específico del módulo BI
pytest tests/test_bi_export.py
```

## 📊 Integración con Herramientas BI y Contables

### **Power BI** (Recomendado)
1. **Informes Financieros**: Importar CSV desde `outputs/financial_reports/`
2. **Modelo BI**: Importar archivos CSV desde `outputs/bi/`
3. **Relaciones**: Establecer relaciones automáticamente por claves foráneas
4. **Dashboards**: Crear visualizaciones sobre el modelo estrella
5. **Actualizaciones**: Configurar refresh automático desde archivos

### **Excel Avanzado**
1. **Power Query**: Conectar a carpetas de salida para actualización automática
2. **Tablas dinámicas**: Usar informes financieros para análisis contable
3. **Macros VBA**: Automatizar importación de nuevos reportes
4. **Gráficos**: Visualizaciones automáticas de tendencias financieras

### **Tableau**
1. **Conexión directa**: A archivos CSV generados
2. **Modelo estrella**: Aprovechar estructura optimizada para análisis
3. **Dashboards empresariales**: Combinar métricas operativas y financieras

### **Sistemas Contables Externos**
1. **Formato estándar**: CSV compatible con la mayoría de sistemas contables
2. **Mapeo de cuentas**: Estructura compatible con PUC colombiano
3. **Validaciones**: Verificación automática de ecuaciones contables
4. **Auditoria**: Trazabilidad completa desde Siigo hasta reportes finales

### **APIs de Integración** (Próximamente)
- **Webhook endpoints** para actualización automática
- **REST API** para integración con otros sistemas
- **Notificaciones** automáticas de nuevos reportes generados

## 🚨 Solución de Problemas

### **Problemas de GUI**
```
❌ Error: PySide6 no está instalado
```
- **Solución**: `pip install PySide6>=6.7.0`
- **Alternativa**: Usar CLI con `python main_hexagonal.py`

```
❌ Error: Menu config not found
```
- **Solución**: Verificar que `menu_config.json` existe
- **Comando**: Copiar desde `menu_config_extended.json` si es necesario

### **Error de Autenticación**
```
❌ Error: Authentication failed
```
- Verificar `SIIGO_USERNAME` y `SIIGO_ACCESS_KEY`
- Confirmar conectividad con API de Siigo
- Revisar logs en `app.log` para detalles

### **Error de Validación de Licencia**
```  
❌ Error: License validation failed
```
- Verificar `LICENSE_URL` y `LICENSE_KEY`
- Confirmar conectividad a internet
- Modo demo disponible para pruebas locales

### **Problemas en Informes Financieros** ⭐
```
❌ Error: Financial report generation failed
```
- Verificar que hay facturas en el período solicitado
- Revisar conectividad con API de Siigo
- Confirmar permisos de escritura en `outputs/financial_reports/`
- Validar formato de fechas (YYYY-MM-DD)

### **Problemas en Exportación BI**
```
❌ Error: BI export failed
```
- Revisar logs en `app.log` para detalles
- Verificar permisos de escritura en carpeta `outputs/`
- Confirmar que hay facturas disponibles para procesar
- Validar estructura JSON de facturas de entrada

### **Problemas de Rendimiento**
```
⚠️ La aplicación está lenta
```
- **GUI**: Verificar que PySide6 está actualizado
- **CLI**: Reducir cantidad de registros a procesar
- **Memoria**: Cerrar otras aplicaciones pesadas
- **Red**: Verificar velocidad de conexión a API Siigo

## 📄 API de Siigo Utilizada

**Endpoints Principales**:
- `POST /auth` - Autenticación
- `GET /v1/invoices` - Consulta de facturas  
- `GET /v1/users/current` - Verificación de estado

**Documentación**: [API Siigo Official](https://api.siigo.com/docs)

## 📝 Registro de Cambios

### **v3.0.0 - Diciembre 17, 2024** 🎉 ACTUAL
- ✅ **NUEVO**: Sistema completo de licencias de 3 niveles (FREE, PROFESSIONAL, ENTERPRISE)
- ✅ **NUEVO**: Control de acceso automático por tipo de licencia
- ✅ **NUEVO**: Límites dinámicos de facturas según licencia (500/2000/ilimitadas)
- ✅ **NUEVO**: Gestión centralizada de licencias con License Manager
- ✅ **NUEVO**: Validación automática de permisos en todos los casos de uso
- ✅ **NUEVO**: CLI con menús adaptativos según licencia activa
- ✅ **NUEVO**: Indicadores visuales de licencia en GUI
- ✅ **NUEVO**: Configuración completa de licencias vía variables de entorno
- ✅ **NUEVO**: Documentación exhaustiva del sistema de licencias
- ✅ **MEJORA**: Arquitectura hexagonal extendida con servicios de dominio
- ✅ **MEJORA**: Separación de responsabilidades para gestión de licencias
- ✅ **MEJORA**: Tests unitarios actualizados para validación de licencias

### **v2.1.0 - Septiembre 17, 2024**
- ✅ **NUEVO**: Interfaz Gráfica completa con PySide6
- ✅ **NUEVO**: Sistema de menús dinámicos configurables vía JSON
- ✅ **NUEVO**: Integración completa de informes financieros en GUI
- ✅ **NUEVO**: Menús contextuales profesionales con iconos
- ✅ **NUEVO**: Validación de licencia visual en tiempo real
- ✅ **NUEVO**: Configuración externa sin necesidad de programar
- ✅ **NUEVO**: Documentación completa del sistema de menús
- ✅ **MEJORA**: Arquitectura hexagonal extendida para GUI
- ✅ **MEJORA**: Separación completa de lógica presentación/negocio
- ✅ **MEJORA**: Sistema de logging unificado para GUI y CLI
- ✅ **CORRECCIÓN**: Bugs corregidos en callbacks de menús PySide6
### **v2.0.0 - Septiembre 14, 2024** ⭐
- ✅ **NUEVO**: Módulo completo de Business Intelligence
- ✅ **NUEVO**: Informes Financieros Automatizados (Estado de Resultados, Balance General)
- ✅ **NUEVO**: Generación de modelo estrella para Power BI
- ✅ **NUEVO**: 6 tablas CSV interconectadas (fact + dimensions)
- ✅ **NUEVO**: Extracción inteligente de reglas de negocio
- ✅ **NUEVO**: Validación automática de esquemas
- ✅ **NUEVO**: Estadísticas detalladas de procesamiento
- ✅ **NUEVO**: Integración con API financiera de Siigo
- ✅ **MEJORA**: Interfaz CLI actualizada con opciones de informes
- ✅ **MEJORA**: Tests unitarios para módulo BI y reportes financieros
- ✅ **MEJORA**: Documentación técnica expandida

### **v1.0.0 - Versiones Anteriores**
- ✅ Funcionalidades básicas de consulta de facturas
- ✅ Exportación simple CSV  
- ✅ Validación de licencias
- ✅ Arquitectura hexagonal base
- ✅ Integración básica con API de Siigo

## 🤝 Contribución

1. Fork del proyecto
2. Crear rama feature: `git checkout -b feature/Nueva-Funcionalidad`
3. Commit cambios: `git commit -m 'Agregar nueva funcionalidad'`
4. Push a la rama: `git push origin feature/Nueva-Funcionalidad`  
5. Crear Pull Request

## 📄 Licencia

Este proyecto está bajo licencia MIT. Ver `LICENSE` para más detalles.

---

**📧 Contacto**: Desarrollado con ❤️ siguiendo principios SOLID y arquitectura limpia

**📍 Estado Actual**: ✅ **Sistema completo con GUI, CLI y licencias de 3 niveles** - Acceso controlado por tipo de licencia

**🔄 Última Actualización**: Diciembre 17, 2024

**🚀 Próximas Funcionalidades**:
- 📄 Exportación de informes a PDF
- 📊 Dashboard en tiempo real con métricas por licencia
- 🔗 API REST para integraciones empresariales  
- 📱 Responsive design mejorado en GUI
- 🌐 Modo multi-empresa para licencias ENTERPRISE
- 📈 Análisis predictivo con IA
- 🔐 Sistema de autenticación multi-usuario
- 💳 Integración con procesadores de pagos para upgrades automáticos